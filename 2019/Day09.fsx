#load "utils/Base.fsx"
open Base
#load "utils/ICC.fsx"
open ICC

let program =
    inputFile "09" string
    |> Seq.exactlyOne
    |> ssplit ","
    |> Array.map int64

let solve input program =
    IntcodeComputer.run input program |> List.rev

// ===================================================================================================================
// 2019.09 A
// ===================================================================================================================

solve [1] [|109L;1L;204L;-1L;1001L;100L;1L;100L;1008L;100L;16L;101L;1006L;101L;0L;99L|]
|> solution "09a.1" [109L;1L;204L;-1L;1001L;100L;1L;100L;1008L;100L;16L;101L;1006L;101L;0L;99L]
solve [1] [|1102L;34915192L;34915192L;7L;4L;7L;99L;0L|]
|> solution "09a.2" [1219070632396864L]
solve [1] [|104L;1125899906842624L;99L|]
|> solution "09a.3" [1125899906842624L]
solve [1] program
|> solution "09a" [2377080455L]

// ===================================================================================================================
// 2019.09 B
// ===================================================================================================================

solve [2] program
|> solution "09b" [74917L]